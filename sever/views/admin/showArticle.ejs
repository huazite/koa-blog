<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的文章</title>
    <link rel="stylesheet" href="/admin/lib/layui/css/layui.css">
    <link rel="stylesheet" href="/admin/lib/editormd/css/editormd.min.css">
    <style>
        html,body{
            background-color: #f5f5f5;
        }
        form{
            width: 90%;
            margin: 0 auto;
            margin-top: 10px;
        }
        .layui-form-item{
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <form class="layui-form layui-form-pane" action="" method="POST">
        <input id="id" type="text" name="id" data-id="<%= article.id%>" class="layui-hide">
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">请选择分类</label>
                <div class="layui-input-inline">
                    <select name="category" id="select" lay-verify="required" >
                        <option value="<%= category.id%>"><%= category.category_name%></option>
                        <% for(let category of categories){%>
                            <option value="<%= category.id%>"><%= category.category_name%></option>
                        <% }%>
                    </select>
                </div>
                <button class="layui-btn" id="addCategory">
                    <i class="layui-icon">&#xe608;</i> 添加分类
                </button>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" style="width: 150px;">是否置顶文章</label>
                <div class="layui-input-inline">
                    <input id="is_stick" type="checkbox" name="is_stick" <%= article.is_stick == 1 ? 'checked="checked"' : null%> lay-skin="switch" lay-text="YES|NO">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">文章标题</label>
            <div class="layui-input-block">
                <input id="title" type="text" name="title" required  lay-verify="required" value="<%= article.title%>" placeholder="请输入文章标题" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
           <div class="layui-inline">
                <label class="layui-form-label">简介图片</label>
                <div class="layui-input-inline" style="width: 400px;">
                    <input value="<%= article.intro_img%>" id="intro_img" type="text" name="intro_img" placeholder="请输入图片链接" autocomplete="off" class="layui-input">
                </div>
           </div>

           <div class="layui-inline">
                <label class="layui-form-label">请输入标签</label>
                <div  class="layui-input-inline" style="width: 400px;">
                    <input value="<%= article.keyword%>" id="keyword" type="text" name="keyword"  placeholder="请输入文章标签，以'、'分隔'" autocomplete="off" class="layui-input">
                </div>
           </div>
        </div>
        <div class="layui-form-item">
            <div id="editormd" >
                <textarea id="editormd-markdown-doc" name="editormd-markdown-doc" style="display:none;"></textarea>
                <!-- 注意：name属性的值-->
                <textarea id="editormd-html-code" name="editormd-html-code" style="display:none;"></textarea>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-inline" style="width: 400px;">
                <button class="layui-btn" lay-submit id="mod_publish">发布</button>
                <button type="layui-btn" class="layui-btn layui-btn-normal" id="mod_save">保存</button>
                <button type="reset" class="layui-btn layui-btn-primary" id="reset">重置</button>
            </div>
        </div>
    </form>
    
</body>
</html>
<script src="/admin/lib/jquery/jquery.js"></script>
<script src="/admin/lib/editormd/editormd.min.js"></script>
<script src="/admin/lib/layui/layui.js"></script>
<script src="/admin/js/article.js"></script>
<script>
  $(function() {
    var content = `<%= article.article_formd%>`;
    $('#editormd-markdown-doc').val(unescape(content));
    //edit.md初始化代码
    editormd("editormd", {//注意1：这里的就是上面的DIV的id属性值
        width   : "100%",
        height  : 640,
        syncScrolling : "single",
        path    : "/admin/lib/editormd/lib/",//注意2：你的路径
        saveHTMLToTextarea : true,//注意3：这个配置，方便post提交表单

        emoji: true, //emoji表情，默认关闭
        flowChart: true,//开启流程图支持，默认关闭
    });
});
</script>
